@page "/tickets"

<div class="grid-container">
    <div class="left-column">
        <div class="header">
            <h1>Tickets</h1>
        </div>
        <div class="form-container">
            <div class="form-group">
                <label for="ticketName">Ticket name</label>
                <input type="text" id="ticketName" @bind="NewTicketName" class="form-control" />
            </div>
            <div class="form-group">
                <label for="bookingNumber">Booking number</label>
                <input type="text" id="bookingNumber" @bind="NewTicketBookingNumber" class="form-control" />
            </div>
            <div class="button-group">
                <button type="button" 
                        class="btn btn-primary" 
                        @onclick="CreateTicket">Save</button>
                
                <button type="button" 
                        class="btn btn-secondary"
                        disabled="@(SelectedTicket == null)"
                        @onclick="EditTicket">@EditButtonText</button>
                
                <button type="button" 
                        class="btn btn-secondary"
                        disabled="@(SelectedTicket == null)"
                        @onclick="AddToSprint">Add to sprint</button>
                
                <div class="form-check">
                    <input type="checkbox" 
                           class="form-check-input" 
                           id="showAllTickets" 
                           @bind="IsShowAllTicketsActive" />
                    <label class="form-check-label" for="showAllTickets">Show all tickets</label>
                </div>
            </div>
        </div>
    </div>

    <div class="right-column">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Booking number</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var ticket in DataModel.Tickets)
                {
                    <tr class="@(SelectedTicket?.Id == ticket.Id ? "selected" : "")"
                        @onclick="() => SelectTicket(ticket)">
                        <td>@ticket.Name</td>
                        <td>@ticket.BookingNumber</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@code {
    private string NewTicketName { get; set; }
    private string NewTicketBookingNumber { get; set; }
    private bool IsShowAllTicketsActive { get; set; }
    private string EditButtonText => "Edit";
    private TicketDto SelectedTicket { get; set; }
    private DataModel DataModel { get; set; }

    private void CreateTicket()
    {
        // Implementiere die Create-Logik
    }
    
    private void EditTicket()
    {
        // Implementiere die Edit-Logik
    }
    
    private void AddToSprint()
    {
        // Implementiere die Add-to-Sprint-Logik
    }

   // private void SelectTicket(TicketDto ticket)
   // {
   //     SelectedTicket = ticket;
   // }
}

<style>
    .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }
    
    .form-container {
        display: grid;
        gap: 15px;
    }
    
    .button-group {
        display: flex;
        gap: 10px;
        align-items: center;
    }
    
    .selected {
        background-color: #e8e8e8;
    }
    
    .table {
        width: 100%;
    }
</style>